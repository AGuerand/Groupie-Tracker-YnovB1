<!DOCTYPE html>
<html>

<head>
    <title>Groupie Tracker</title>
    <meta charset="utf-8">
    <link type="text/css" href="../assets/Select.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/axentix@1.2.1/dist/css/axentix.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axentix@1.2.1/dist/js/axentix.min.js"></script>
    <script type="text/javascript" src="../assets/script.js"></script>

    <script type="text/javascript">
        // Print all the information on the serve
        function create() {
            // We get all the information from Go (in string)
            var golangVar = "{{.Image}}";
            var NameInfo = "{{.Name}}";
            var MembersInfo = "{{.Members}}"
            var CreationDate = "{{.CreationDate}}"
            var First = "{{.FirstAlbum}}"

            // We remove unnecessary hooks at the beginning and at the end of the string
            MembersInfo = MembersInfo.slice(2, -3);
            NameInfo = NameInfo.slice(1, -2);

            // We separate the information
            const DateSplit = /\d{4}/g;
            const FirstSplit = /\d{2}\W\d{2}\W\d{4}/g;
            const normal = /https:\/\/groupietrackers.herokuapp.com\/api\/images\/\w*.jpeg/g;

            // We put the information in arrays
            var DateReg = CreationDate.match(DateSplit)
            var FirstReg = First.match(FirstSplit)
            var img = golangVar.match(normal);
            var MembersReg = MembersInfo.split(/,\]\s\[/)
            var naimu = NameInfo.split(',')
            deletes()

            // Loop who will add a div for each artists
            for (i = 0; i <= 51; i++) {

                // La carte de l'artiste
                var div1 = document.createElement('div');
                div1.setAttribute('class', 'card airforce light-1 shadow-1 dropshadow-5')
                div1.id = i;
                div1.onclick = function () {
                    redirect(this.id);
                }

                // The picture frame
                var div2 = document.createElement('div');
                div2.setAttribute('class', 'card-image')

                // The picture
                var divimage = document.createElement('img');
                divimage.setAttribute('class', 'img-responsive')
                divimage.setAttribute('id', 'img')
                divimage.setAttribute('src', img[i])
                divimage.setAttribute('alt', 'Music')

                // name of group
                var div3 = document.createElement('div');
                var txt3 = document.createTextNode(naimu[i])
                div3.setAttribute('class', 'card-header')
                div3.appendChild(txt3)

                // member list
                var div4 = document.createElement('div');
                var txt4 = document.createTextNode(MembersReg[i])
                div4.setAttribute('class', 'card-content')
                div4.appendChild(txt4)

                // creation date
                var div5 = document.createElement('div');
                var txt5 = document.createTextNode("CreationDate: " + DateReg[i])
                div5.setAttribute('class', 'card-content')
                div5.appendChild(txt5)
                var parent = document.getElementById("start")

                // first album
                var div6 = document.createElement('div');
                var txt6 = document.createTextNode(("FirstAlbum: " + FirstReg[i]))
                div6.setAttribute('class', 'card-footer')
                div6.appendChild(txt6)

                // We assemble the divs
                document.body.appendChild(div1);
                parent.appendChild(div1)
                div1.appendChild(div2)
                div1.appendChild(div3)
                div1.appendChild(div4)
                div1.appendChild(div5)
                div1.appendChild(div6)
                div2.appendChild(divimage)
            }

        }

        function redirect(id) {
            window.location.href = '/index?' + String(id);
        }


        function searchCreate(i) {
            // We get all the information from Go (in string)
            var golangVar = "{{.Image}}";
            var NameInfo = "{{.Name}}";
            var MembersInfo = "{{.Members}}"
            var CreationDate = "{{.CreationDate}}"
            var First = "{{.FirstAlbum}}"

            // We remove unnecessary hooks at the beginning and at the end of the string
            MembersInfo = MembersInfo.slice(2, -3);
            NameInfo = NameInfo.slice(1, -2);

             // We separate the information
            const DateSplit = /\d{4}/g;
            const FirstSplit = /\d{2}\W\d{2}\W\d{4}/g;
            const normal = /https:\/\/groupietrackers.herokuapp.com\/api\/images\/\w*.jpeg/g;

            // We put the information in arrays
            var DateReg = CreationDate.match(DateSplit)
            var FirstReg = First.match(FirstSplit)
            var img = golangVar.match(normal);
            var MembersReg = MembersInfo.split(/,\]\s\[/)
            var naimu = NameInfo.split(',')

            // The artist's card
            var div1 = document.createElement('div');
            div1.setAttribute('class', 'card airforce light-1 shadow-1 dropshadow-5')
            div1.id = i;
            div1.onclick = function () {
                redirect(this.id);
            }
            // Le cadre de la photo
            var div2 = document.createElement('div');
            div2.setAttribute('class', 'card-image')
            // The picture
            var divimage = document.createElement('img');
            divimage.setAttribute('class', 'img-responsive')
            divimage.setAttribute('id', 'img')
            divimage.setAttribute('src', img[i])
            divimage.setAttribute('alt', 'Music')
            // name of group
            var div3 = document.createElement('div');
            var txt3 = document.createTextNode(naimu[i])
            div3.setAttribute('class', 'card-header')
            div3.appendChild(txt3)
            // member list
            var div4 = document.createElement('div');
            var txt4 = document.createTextNode(MembersReg[i])
            div4.setAttribute('class', 'card-content')
            div4.appendChild(txt4)
            // creation date
            var div5 = document.createElement('div');
            var txt5 = document.createTextNode("CreationDate: " + DateReg[i])
            div5.setAttribute('class', 'card-content')
            div5.appendChild(txt5)
            var parent = document.getElementById("start")
            // first album
            var div6 = document.createElement('div');
            var txt6 = document.createTextNode(("FirstAlbum: " + FirstReg[i]))
            div6.setAttribute('class', 'card-footer')
            div6.appendChild(txt6)
            // We assemble the divs
            document.body.appendChild(div1);
            parent.appendChild(div1)
            div1.appendChild(div2)
            div1.appendChild(div3)
            div1.appendChild(div4)
            div1.appendChild(div5)
            div1.appendChild(div6)
            div2.appendChild(divimage)

        }


        function searchs() {

            var NameInfo = "{{.Name}}";
            var MembersInfo = "{{.Members}}"
            var CreationDate = "{{.CreationDate}}"
            var First = "{{.FirstAlbum}}"

            // We remove unnecessary hooks at the beginning and at the end of the string
            MembersInfo = MembersInfo.slice(2, -3);
            NameInfo = NameInfo.slice(1, -2)
            // We separate the information
            const DateSplit = /\d{4}/g;
            const FirstSplit = /\d{2}\W\d{2}\W\d{4}/g;
            // We put the information in arrays
            var DateReg = CreationDate.match(DateSplit)
            var FirstReg = First.match(FirstSplit)
            var MembersReg = MembersInfo.split(/,\]\s\[/)
            var naimu = NameInfo.split(',')


            deletes()

            var searchTerm = []
            var searchs = document.getElementById("txtSearch").value

            console.log(searchs)

            searchTerm.push(searchs)

            for (i = 0; i <= 51; i++) {
                var inclname = naimu[i].includes(searchTerm)
                var incldate = DateReg[i].includes(searchTerm)
                var inclfirst = FirstReg[i].includes(searchTerm)
                var inclmember = MembersReg[i].includes(searchTerm)

                if (inclname == true) {
                    searchCreate(i)
                } else if (incldate == true) {
                    searchCreate(i)
                } else if (inclfirst == true) {
                    searchCreate(i)
                } else if (inclmember == true) {
                    searchCreate(i)
                }
            }
        }

        function solo() {
            // Print if we have single guy
            let MembersInfo = "{{.Members}}"
            MembersInfo = MembersInfo.slice(2, -3);
            let MembersReg = MembersInfo.split(/,\]\s\[/)
            let Filter = ","
            deletes();
            for (i = 0; i <= 51; i++) {
                var thememe = MembersReg[i].includes(Filter)
                if (thememe == false) {
                    searchCreate(i)
                }
            }
        }
        function groupe() {
            // Print if we have band
            let MembersInfo = "{{.Members}}"
            MembersInfo = MembersInfo.slice(2, -3);
            let MembersReg = MembersInfo.split(/,\]\s\[/)
            let Filter = ","
            deletes();
            for (i = 0; i <= 51; i++) {
                var thememe = MembersReg[i].includes(Filter)
                if (thememe == true) {
                    searchCreate(i)
                }
            }
        }

        function before2000() {
             // Print if creation date is before 2000 year
            var CreationDate = "{{.CreationDate}}"
            const DateSplit = /\d{4}/g;
            var DateReg = CreationDate.match(DateSplit)
            deletes();
            for (let i = 0; i <= 51; i++){
                if (DateReg[i] < 2000){
                    searchCreate(i)
                } 
            } 
        }

        function after2000() {
            // Print if creation date is after 2000 year
            var CreationDate = "{{.CreationDate}}"
            const DateSplit = /\d{4}/g;
            var DateReg = CreationDate.match(DateSplit)
            deletes();
            for (let i = 0; i <= 51; i++){
                if (DateReg[i] >= 2000){
                    searchCreate(i)
                } 
            } 
        }
        

    </script>



</head>

<body class="layout airforce dark-4 with-sidenav fixed-sidenav">
    <header>
        <nav class="navbar airforce dark-5">
            <a href="/" class="navbar-brand ml-0.5">Groupie Tracker</a>
            <div class="navbar-menu ml-auto">
                <a class="navbar-link" href="#" id="us">Us</a>
                <form action="/hms/accommodations" method="GET" onSubmit="return false">
                    <div class="row">
                        <div class="col-xs-6 col-md-4">
                            <div class="input-group">
                                <input type="search" class="form-control navbar-btn" placeholder="Search"
                                    id="txtSearch" />
                                <div class="input-group-btn">
                                    <button type='search' onclick="searchs()" class="btn btn-primary navbar-btn"
                                        id="searchbtn">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </nav>
    </header>

    <div id="example-sidenav" data-ax="sidenav" class="sidenav shadow-1 large fixed airforce dark-5">

        <div class="sidenav-header">
            <button data-target="example-sidenav" class="sidenav-trigger"><i class="fas fa-times"></i></button>
            <img class="sidenav-logo" src="../assets/logo.png" alt="Logo" id="logoside" />
        </div>
        <a onclick="create()" class="sidenav-link">All</a>
        <a onclick="solo()" class="sidenav-link">Solo</a>
        <a onclick="groupe()" class="sidenav-link">Band</a>
        <a onclick="before2000()" class="sidenav-link">Before 2000</a>
        <a onclick="after2000()" class="sidenav-link active">After 2000</a>
    </div>

    <main>
        <!-- Code here the main content -->
        <button data-target="example-sidenav" class="btn rounded-1 press amaranth dark-1 sidenav-trigger hide-md-up">
            Open sidenav
        </button>
        <div class="grix xs1 md2 lg3" id="start">
            <script type="text/javascript">
                create();
            </script>
        </div>
    </main>

    <footer class="footer airforce dark-5">
        <marquee>
            Copyright © 2021 - Example
            <img src="../assets/logo.png" height="30px" width="30px">
            INFORMATION CORONAVIRUS, COVID-19. PROTÉGEONS-NOUS
            LES UNS LES AUTRES. Se laver régulièrement les mains
            ou utiliser une solution hydroalcoolique, Tousser ou éternuer dans son
            coude ou dans un mouchoir, Se moucher dans un mouchoir
            à usage unique, Portez un masque chirurgical ou
            en tissu de catégorie 1 quand
            la distance de deux mètres ne
            peut pas être respectée, Respecter une distance
            d’au moins deux mètres avec les
            autres, Limiter au maximum ses
            contacts sociaux (6 maximum), Eviter de se toucher le visage, Aérer les pièces le plus souvent
            possible, au minimum quelques
            minutes toutes les heures, Saluer sans serrer la main
            et arrêter les embrassades, Utiliser les outils numériques (TousAntiCovid). Pour plus d'informations
            retrouver tous sur ce site internet ou appeler au numero suivants:
            https://www.gouvernement.fr/info-coronavirus / 0 800 130 000
            (appel gratuit)
        </marquee>

    </footer>

</body>

</html>