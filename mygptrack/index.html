<!DOCTYPE html>
<html>

<head>
    <title>Axentix Layout - Fixed sidenav</title>
    <meta charset="utf-8">
    <link type="text/css" href="../assets/Select.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/axentix@1.2.1/dist/css/axentix.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


    <script type="text/javascript" id="testtt">
            function getParameters() {
            var urlcourante = document.location.href;
            var urlcourante = urlcourante.replace(/\/$/, "");
            // Gardons dans la variable queue_url uniquement la portion derrière le dernier slash de urlcourante
            queue_url = urlcourante.substring(urlcourante.lastIndexOf("/") + 1);
            let reg = /(?<=\?).*/g;
            return queue_url.match(reg)[0]
        }

        console.log(getParameters())

        // JS qui permet l'affichage de nos info sur le server
        function create() {
            var id = getParameters();
            if (id > 51 || id < 0){
                id = 0
            }
            // On récupere les infos de Go (en string)
            var golangVar = "{{.Image}}";
            var NameInfo = "{{.Name}}";
            var MembersInfo = "{{.Members}}"
            var CreationDate = "{{.CreationDate}}"
            var First = "{{.FirstAlbum}}"
            var relation = "{{.Relation}}"

            // On enlève les crochets inutile au début et a la fin du string
            MembersInfo = MembersInfo.slice(2, -3);
            NameInfo = NameInfo.slice(1, -2);
            relation = relation.slice(3, -3);

            // On sépare les informations
            const DateSplit = /\d{4}/g;
            const FirstSplit = /\d{2}\W\d{2}\W\d{4}/g;
            const normal = /https:\/\/groupietrackers.herokuapp.com\/api\/images\/\w*.jpeg/g;

            // On place les informations dans des tableaux
            var DateReg = CreationDate.match(DateSplit)
            var FirstReg = First.match(FirstSplit)
            var img = golangVar.match(normal);
            var MembersReg = MembersInfo.split(/,\]\s\[/)
            var naimu = NameInfo.split(',')
            var dateLocation = relation.split(/\]\s\[,/)

            // for (i = 0 ; i < 51 ; i++) {
            //     for (let ele = 0 ; ele < length.dateLocation[i] ; i++) {
            //         dateLocation = dateLocation.replace(',', "\n");
            //     }
            // }

            console.log(dateLocation)

            // La carte de l'artiste
            var div1 = document.createElement('div');
            div1.setAttribute('class', 'card airforce light-1 shadow-1 dropshadow-5')

            // Le cadre de la photo
            var div2 = document.createElement('div');
            div2.setAttribute('class', 'card-image')

            // La photo du groupe
            var divimage = document.createElement('img');
            divimage.setAttribute('class', 'img-responsive')
            divimage.setAttribute('id', 'img')
            divimage.setAttribute('src', img[id])
            divimage.setAttribute('alt', 'Music')

            // nom du groupe
            var div3 = document.createElement('div');
            var txt3 = document.createTextNode(naimu[id])
            div3.setAttribute('class', 'card-header')
            div3.appendChild(txt3)

            // member list
            var div4 = document.createElement('div');
            var txt4 = document.createTextNode(MembersReg[id])
            div4.setAttribute('class', 'card-content')
            div4.appendChild(txt4)

            // date de création
            var div5 = document.createElement('div');
            var txt5 = document.createTextNode("CreationDate: " + DateReg[id])
            div5.setAttribute('class', 'card-content')
            div5.appendChild(txt5)
            var parent = document.getElementById("start")

            // first album
            var div6 = document.createElement('div');
            var txt6 = document.createTextNode(("FirstAlbum: " + FirstReg[id]))
            div6.setAttribute('class', 'card-footer')
            div6.appendChild(txt6)

            var div7 = document.createElement('div');
            var txt7 = document.createTextNode(("Concert: " + dateLocation[id]))
            div7.setAttribute('class', 'card-footer')
            div7.appendChild(txt7)

            // On assemble les divs
            document.body.appendChild(div1);
            parent.appendChild(div1)
            div1.appendChild(div2)
            div1.appendChild(div3)
            div1.appendChild(div4)
            div1.appendChild(div5)
            div1.appendChild(div6)
            div1.appendChild(div7)
            div2.appendChild(divimage)
        }






    </script>
</head>

<body class="layout airforce dark-4 with-sidenav fixed-sidenav">
    <header>
        <nav class="navbar airforce dark-5">
            <!-- <a href="./index.html" target="_blank" class="navbar-brand">Groupie Tracker</a> -->
            <a href="/" class="navbar-brand ml-0.5">Groupie Tracker</a>
            <div class="navbar-menu ml-auto">
                <!-- <a class="navbar-link" href="/Select">Select</a> -->
                <a class="navbar-link" href="#" id="us">Us</a>
                <form action="/hms/accommodations" method="GET">
                    <div class="row">
                        <div class="col-xs-6 col-md-4">
                            <div class="input-group">
                                <input type="search" class="form-control navbar-btn" placeholder="Search"
                                    id="txtSearch" /> <!-- onkeyup="searchArtists()" />  -->
                                <div class="input-group-btn">
                                    <button class="btn btn-primary navbar-btn" type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </nav>
    </header>

    <main>
        <div id="start">
            <script type="text/javascript">
                create();
            </script>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/axentix@1.2.1/dist/js/axentix.min.js"></script>
    <footer class="footer airforce dark-5">
        <marquee>
            Copyright © 2021 - Example
            <img src="../assets/logo.png" height="30px" width="30px">
        </marquee>

    </footer>
    <!-- <script>
        function searchArtists() {
            var x = document.getElementById("start");
            console.log(x.textContent);


        }
    </script> -->
</body>

</html>