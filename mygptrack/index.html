<!DOCTYPE html>
<html>

<head>
    <title>Axentix Layout - Fixed sidenav</title>
    <meta charset="utf-8">
    <link type="text/css" href="../assets/style.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/axentix@1.2.1/dist/css/axentix.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


    <script type="text/javascript" id="testtt">
        function getParameters() {
            let urlcourante = document.location.href;
            urlcourante = urlcourante.replace(/\/$/, "");
            // Gardons dans la letiable queue_url uniquement la portion derrière le dernier slash de urlcourante
            queue_url = urlcourante.substring(urlcourante.lastIndexOf("/") + 1);
            let reg = /(?<=\?).*/g;
            return queue_url.match(reg)[0]
        }

        console.log(getParameters())

        // JS qui permet l'affichage de nos info sur le server
        function create() {
            let id = getParameters();
            if (id > 51 || id < 0) {
                id = 0
            }
            // On récupere les infos de Go (en string)
            let golanglet = "{{.Image}}";
            let NameInfo = "{{.Name}}";
            let MembersInfo = "{{.Members}}"
            let CreationDate = "{{.CreationDate}}"
            let First = "{{.FirstAlbum}}"
            let relation = "{{.Relation}}"

            // On enlève les crochets inutile au début et a la fin du string
            MembersInfo = MembersInfo.slice(2, -3);
            NameInfo = NameInfo.slice(1, -2);
            relation = relation.slice(3, -3);

            // On sépare les informations
            const DateSplit = /\d{4}/g;
            const FirstSplit = /\d{2}\W\d{2}\W\d{4}/g;
            const normal = /https:\/\/groupietrackers.herokuapp.com\/api\/images\/\w*.jpeg/g;

            // On place les informations dans des tableaux
            let DateReg = CreationDate.match(DateSplit)
            let FirstReg = First.match(FirstSplit)
            let img = golanglet.match(normal);
            let MembersReg = MembersInfo.split(/,\]\s\[/)
            let naimu = NameInfo.split(',')
            let dateLocation = relation.split(/\]\s\[/)

            let LieuDatePourToi = dateLocation[id]
            let LieuDatePourMoi = dateLocation[id]

            // Date[0] = "", donc commencé a index 1 pour avoir les dates.
            let regDate = /,[\w*\-\w*]*,/g;
            let Date = LieuDatePourToi.split(regDate);
            let Lieu = LieuDatePourMoi.split(/,[\d{2}\W\d{2}\W\d{4}]*/);

            console.log(LieuDatePourToi);
            console.log(Date);

            // La carte de l'artiste
            let div1 = document.createElement('div');
            // div1.setAttribute('class', 'card airforce light-1 shadow-1 dropshadow-5')

            // Le cadre de la photo
            let div2 = document.createElement('div');
            // div2.setAttribute('class', 'card-image')

            // La photo du groupe
            let divimage = document.createElement('img');
            divimage.setAttribute('class', 'imageIndexBigFatStyle')
            divimage.setAttribute('id', 'img')
            divimage.setAttribute('src', img[id])
            divimage.setAttribute('alt', 'Music')

            // nom du groupe
            let div3 = document.createElement('div');
            let txt3 = document.createTextNode(naimu[id])
            div3.setAttribute('class', 'ArtistBigFatNaMu')
            div3.appendChild(txt3)



            let parent = document.getElementById("start")

            let div7 = document.createElement('div');
            let txt7 = document.createTextNode(("Concert : "));
            div7.appendChild(txt7)
            div7.setAttribute('class', 'concertPart')
            
            let div8 = document.createElement('div');
            div8.setAttribute('class', 'concertInfos')
                for (i = 0; i <= Date.length -2; i++) {
                    let divnul = document.createElement('div');
                    let txt8 = document.createTextNode((Lieu[i+1]  + "\t"+ Date[i+1] + "\n"))
                    divnul.appendChild(txt8)
                    div8.appendChild(divnul)
                }


            // On assemble les divs
            document.body.appendChild(div1);
            parent.appendChild(div1)
            div1.appendChild(div3)
            div1.appendChild(div2)
            div1.appendChild(div7)
            div1.appendChild(div8)
            // ici
            div2.appendChild(divimage)
        }
    </script>
</head>

<body class="layout airforce dark-4">
    <header>
        <nav class="navbar airforce dark-5">
            <a href="./index.html" class="navbar-brand ml-0.5">Groupie Tracker</a>
            <div class="navbar-menu ml-auto">
                <a class="navbar-link" href="#" id="us">Us</a>
                <form action="/hms/accommodations" method="GET">
                    <div class="row">
                        <div class="col-xs-6 col-md-4">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Search" id="txtSearch" />
                                <div class="input-group-btn">
                                    <button class="btn btn-primary" type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </nav>
    </header>

    <main>
        <div id="start">
            <script type="text/javascript">
                create();
            </script>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/axentix@1.2.1/dist/js/axentix.min.js"></script>
    <footer class="footer airforce dark-5">
        <marquee>
            Copyright © 2021 - Example
            <img src="../assets/logo.png" height="30px" width="30px"> INFORMATION CORONAVIRUS, COVID-19. PROTÉGEONS-NOUS LES UNS LES AUTRES. Se laver régulièrement les mains ou utiliser une solution hydroalcoolique, Tousser ou éternuer dans son coude
            ou dans un mouchoir, Se moucher dans un mouchoir à usage unique, Portez un masque chirurgical ou en tissu de catégorie 1 quand la distance de deux mètres ne peut pas être respectée, Respecter une distance d’au moins deux mètres avec les autres,
            Limiter au maximum ses contacts sociaux (6 maximum), Eviter de se toucher le visage, Aérer les pièces le plus souvent possible, au minimum quelques minutes toutes les heures, visiter cette page : https://github.com/FeutreEnBois, Saluer sans
            serrer la main et arrêter les embrassades, Utiliser les outils numériques (TousAntiCovid). Pour plus d'informations retrouver nous sur le site internet ou appeler au numero suivants: https://www.gouvernement.fr/info-coronavirus / 0 800 130
            000 (appel gratuit)
        </marquee>

    </footer>
</body>

</html>